
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>7 Wonders Duel (Pantheon) score calculator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@600&display=swap" rel="stylesheet">
    <style>
      * { font-family: 'Open Sans', sans-serif; font-weight: 600; color: #444B53; box-sizing: border-box; }
      body { background-color: #F6F6F6; margin: 0; padding: 40px 0; position: relative; }
      .wrap { max-width: 400px; padding: 0 20px; margin: 0 auto; }
	  .rows {padding: 0;}
      .row-label { font-size: 16px; width: 80px; }
      .counter, .score, .total-score { font-size: 32px; }
      h1, label { text-indent: -99em; position: absolute; width: 0; height: 0; }
      button { background: none; width: 50px; height: 50px; font-size: 24px; border: none; cursor: pointer; line-height: 38px; }
      .row { display: flex; flex-direction: row; align-items: center; justify-content: space-between; margin-bottom: 20px; }
      .counter { display: flex; flex-direction: row; align-items: center; justify-content: space-between; }
      .total-scores { cursor: pointer; display: flex; flex-direction: row; align-items: center; justify-content: space-between; }
	  .total-scores .row-label {visibility: hidden;}
	  .total-score { width: 140px; text-align: center;}
	  input[type="text"] {width: 40px; line-height: 40px; padding: 0; border: 1px solid #333; text-align: center; font-size: 18px;}
    </style>
  </head>

  <body>
    <div class="wrap">
    <h1>7 Wonders Duel (Pantheon) score calculator</h1>

    <ul class="rows">
      <li class="row">
        <h2 class="row-label">Blue</h2>
        <div class="counter">
		  <label for="player-1-blue">Player 1</label>
          <button class="js-decrement" data-row="1" data-player="1" tabindex="-1">&ndash;</button>
          <input id="player-1-blue" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="1" data-player="1" value="0" tabindex="1" />
          <button class="js-increment" data-row="1" data-player="1" tabindex="-1">+</button>
        </div>
        <div class="counter">
		  <label for="player-2-blue">Player 2</label>
          <button class="js-decrement" data-row="1" data-player="2" tabindex="-1">&ndash;</button>
          <input id="player-2-blue" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="1" data-player="2" value="0" tabindex="10" />
          <button class="js-increment" data-row="1" data-player="2" tabindex="-1">+</button>
        </div>
      </li>
      <li class="row">
        <h2 class="row-label">Green</h2>
        <div class="counter">
		  <label for="player-1-green">Player 1</label>
          <button class="js-decrement" data-row="2" data-player="1" tabindex="-1">&ndash;</button>
          <input id="player-1-green" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="2" data-player="1" value="0" tabindex="2" />
          <button class="js-increment" data-row="2" data-player="1" tabindex="-1">+</button>
        </div>
        <div class="counter">
		  <label for="player-2-green">Player 2</label>
          <button class="js-decrement" data-row="2" data-player="2" tabindex="-1">&ndash;</button>
          <input id="player-2-green" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="2" data-player="2" value="0" tabindex="11" />
          <button class="js-increment" data-row="2" data-player="2" tabindex="-1">+</button>
        </div>
      </li>
      <li class="row">
        <h2 class="row-label">Yellow</h2>
        <div class="counter">
		  <label for="player-1-yellow">Player 1</label>
          <button class="js-decrement" data-row="3" data-player="1" tabindex="-1">&ndash;</button>
          <input id="player-1-yellow" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="3" data-player="1" value="0" tabindex="3" />
          <button class="js-increment" data-row="3" data-player="1" tabindex="-1">+</button>
        </div>
        <div class="counter">
		  <label for="player-2-yellow">Player 1</label>
          <button class="js-decrement" data-row="3" data-player="2" tabindex="-1">&ndash;</button>
          <input id="player-2-yellow" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="3" data-player="2" value="0" tabindex="12" />
          <button class="js-increment" data-row="3" data-player="2" tabindex="-1">+</button>
        </div>
      </li>
      <li class="row">
        <h2 class="row-label">Purple</h2>
        <div class="counter">
		  <label for="player-1-purple">Player 1</label>
          <button class="js-decrement" data-row="4" data-player="1" tabindex="-1">&ndash;</button>
          <input id="player-1-purple" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="4" data-player="1" value="0" tabindex="4" />
          <button class="js-increment" data-row="4" data-player="1" tabindex="-1">+</button>
        </div>
        <div class="counter">
		  <label for="player-2-purple">Player 2</label>
          <button class="js-decrement" data-row="4" data-player="2" tabindex="-1">&ndash;</button>
          <input id="player-2-purple" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="4" data-player="2" value="0" tabindex="13" />
          <button class="js-increment" data-row="4" data-player="2" tabindex="-1">+</button>
        </div>
      </li>
      <li class="row">
        <h2 class="row-label">Wonders</h2>
        <div class="counter">
		  <label for="player-1-wonders">Player 1</label>
          <button class="js-decrement" data-row="5" data-player="1" tabindex="-1">&ndash;</button>
          <input id="player-1-wonders" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="5" data-player="1" value="0" tabindex="5" />
          <button class="js-increment" data-row="5" data-player="1" tabindex="-1">+</button>
        </div>
        <div class="counter">
		  <label for="player-2-wonders">Player 2</label>
          <button class="js-decrement" data-row="5" data-player="2" tabindex="-1">&ndash;</button>
          <input id="player-2-wonders" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="5" data-player="2" value="0" tabindex="14" />
          <button class="js-increment" data-row="5" data-player="2" tabindex="-1">+</button>
        </div>
      </li>
      <li class="row">
        <h2 class="row-label">Science</h2>
        <div class="counter">
		  <label for="player-1-science">Player 1</label>
          <button class="js-decrement" data-row="6" data-player="1" tabindex="-1">&ndash;</button>
          <input id="player-1-science" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="6" data-player="1" value="0" tabindex="6" />
          <button class="js-increment" data-row="6" data-player="1" tabindex="-1">+</button>
        </div>
        <div class="counter">
		  <label for="player-2-science">Player 2</label>
          <button class="js-decrement" data-row="6" data-player="2" tabindex="-1">&ndash;</button>
          <input id="player-2-science" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="6" data-player="2" value="0" tabindex="15" />
          <button class="js-increment" data-row="6" data-player="2" tabindex="-1">+</button>
        </div>
      </li>
      <li class="row">
        <h2 class="row-label">Military</h2>
        <div class="counter">
		  <label for="player-1-military">Player 1</label>
          <button class="js-decrement" data-row="7" data-player="1" tabindex="-1">&ndash;</button>
          <input id="player-1-military" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="7" data-player="1" value="0" tabindex="7" />
          <button class="js-increment" data-row="7" data-player="1" tabindex="-1">+</button>
        </div>
        <div class="counter">
		  <label for="player-2-military">Player 2</label>
          <button class="js-decrement" data-row="7" data-player="2" tabindex="-1">&ndash;</button>
          <input id="player-2-military" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="7" data-player="2" value="0" tabindex="16" />
          <button class="js-increment" data-row="7" data-player="2" tabindex="-1">+</button>
        </div>
      </li>
      <li class="row">
        <h2 class="row-label">Coins x 3</h2>
        <div class="counter">
		  <label for="player-1-coins">Player 1</label>
          <button class="js-decrement" data-row="8" data-player="1" tabindex="-1">&ndash;</button>
          <input id="player-1-coins" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="8" data-player="1" value="0" tabindex="8" />
          <button class="js-increment" data-row="8" data-player="1" tabindex="-1">+</button>
        </div>
        <div class="counter">
		  <label for="player-2-coins">Player 2</label>
          <button class="js-decrement" data-row="8" data-player="2" tabindex="-1">&ndash;</button>
          <input id="player-2-coins" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="8" data-player="2" value="0" tabindex="17" />
          <button class="js-increment" data-row="8" data-player="2" tabindex="-1">+</button>
        </div>
      </li>
      <li class="row">
        <h2 class="row-label">Divinities</h2>
        <div class="counter">
		  <label for="player-1-divinities">Player 1</label>
          <button class="js-decrement" data-row="9" data-player="1" tabindex="-1">&ndash;</button>
          <input id="player-1-divinities" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="9" data-player="1" value="0" tabindex="9" />
          <button class="js-increment" data-row="9" data-player="1" tabindex="-1">+</button>
        </div>
        <div class="counter">
		  <label for="player-2-divinities">Player 2</label>
          <button class="js-decrement" data-row="9" data-player="2" tabindex="-1">&ndash;</button>
          <input id="player-2-divinities" type="text" inputmode="numeric" pattern="[0-9]*" class="js-score" data-row="9" data-player="2" value="0" tabindex="18" />
          <button class="js-increment" data-row="9" data-player="2" tabindex="-1">+</button>
        </div>
	  </li>
    </ul>
    <div class="total-scores js-total-scores">
      <h2 class="row-label">Totals</h2>
	  <div class="total-score js-total-score-player-1">0</div>
	  <div class="total-score js-total-score-player-2">0</div>
	</div>
    </div>

    <script>

const elemScores = document.querySelectorAll(".js-score");

const elemScoresPlayer1 = document.querySelectorAll(".js-score[data-player='1']");
const elemTotalScorePlayer1 = document.querySelector('.js-total-score-player-1');

const elemScoresPlayer2 = document.querySelectorAll(".js-score[data-player='2']");
const elemTotalScorePlayer2 = document.querySelector('.js-total-score-player-2');

const elemIncrements = document.querySelectorAll('.js-increment');
const elemDecrements = document.querySelectorAll('.js-decrement');

// Update a score
function updateRowScore(row, player, direction) {
  var scoreInput = document.querySelector(".js-score[data-row='" + row + "'][data-player='" + player + "']");
  if (direction == 'decrement' && scoreInput.value > 0) {
    scoreInput.value = parseInt(scoreInput.value) - 1
  }
  if (direction == 'increment') {
    scoreInput.value = parseInt(scoreInput.value) + 1
  }
  updateTotalScore();
}

// Select all on input focus score
elemScores.forEach((elemScore) => {
  elemScore.addEventListener('focus', function(e) {
	elemScore.select();
    elemScore.preventDefault();
    elemScore.stopPropagation();
    return false;
  });
});

// Increment score
elemIncrements.forEach((elemIncrement) => {
  elemIncrement.addEventListener('click', function(e) {
	updateRowScore(elemIncrement.dataset.row, elemIncrement.dataset.player, 'increment');
	e.stopPropagation();
  });
});

// Decrement score
elemDecrements.forEach((elemDecrement) => {
  elemDecrement.addEventListener('click', function(e) {
	updateRowScore(elemDecrement.dataset.row, elemDecrement.dataset.player, 'decrement');
	e.stopPropagation();
  });
});

// Update the total scores with all subtotals
function updateTotalScore() {
  var scorePlayer1 = 0;
  var scorePlayer2 = 0;
  elemScoresPlayer1.forEach((elemScore) => {
    scorePlayer1 += parseInt(elemScore.value);
  });
  elemScoresPlayer2.forEach((elemScore) => {
    scorePlayer2 += parseInt(elemScore.value);
  });
  elemTotalScorePlayer1.innerHTML = scorePlayer1;
  elemTotalScorePlayer2.innerHTML = scorePlayer2;
}

// Reset all scores
document.querySelector('.js-total-scores').addEventListener('click', function(e) {
  var result = window.confirm('Reset your score?');
  if (result == true) {
    elemScores.forEach((elemScore) => {
	  elemScore.value = 0;
    });
  	updateTotalScore();
  }
  e.stopPropagation();
});
    </script>
  </body>
</html>
